---
import Analytics from "@vercel/analytics/astro";
import SpeedInsights from "@vercel/speed-insights/astro";
import { ClientRouter } from "astro:transitions";
import { Head } from "../lib/capo/Head.ts";
import Favicons from "../components/Favicons.astro";
import SEO from "../components/SEO.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import GameOfLife from "../components/GameOfLife.astro";

import "../styles/global.css";

interface Props {
  title: string;
  description: string;
  keywords?: string[];
}

const { title, description, keywords } = Astro.props;
---

<!doctype html>
<html lang="en" transition:name="root" transition:animate="none">
    <Head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <link rel="preload" href="/fonts/GeneralSans-Regular-basic.woff2" as="font" type="font/woff2" crossorigin />
        <link rel="preload" href="/fonts/GeneralSans-Semibold-az.woff2" as="font" type="font/woff2" crossorigin />
        <link rel="preload" href="/fonts/GeneralSans-Bold-name.woff2" as="font" type="font/woff2" crossorigin />

        <Favicons />
        <SEO title={title} description={description} keywords={keywords} />

        <meta
            name="robots"
            content="follow, index, max-snippet:-1, max-video-preview:-1, max-image-preview:large"
        />

        <link rel="sitemap" href="/sitemap-index.xml" />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="Ray's Substack"
            href="https://rayhanadev.substack.com/feed"
        />

        <Analytics />
        <SpeedInsights />
        <ClientRouter />

        <script>
            if (import.meta.env.DEV) {
                import("react-grab");
            }
        </script>
    </Head>
    <body class="flex flex-col items-center flex-1 min-h-dvh w-full px-5 pt-12 sm:pt-20 pb-10 antialiased leading-relaxed">
        <GameOfLife transition:persist />
        <Header transition:persist />
        <main class="w-full max-w-184 flex flex-col gap-4 font-sans flex-1 min-h-[80dvh] sm:min-h-0" transition:animate="fade">
            <slot />
        </main>
        <Footer transition:persist />
    </body>
</html>
