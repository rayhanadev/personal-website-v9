---
import Link from "./Link.astro";

import Github from "../assets/socials/Github.svg";
import LinkedIn from "../assets/socials/LinkedIn.svg";
import Twitter from "../assets/socials/Twitter.svg";

const WEBRING_HOSTNAME = "https://ring.purduehackers.com";
const host = new URL(import.meta.env.SITE).hostname;

const webringLinks = [
  { type: "previous", label: "prev" },
  { type: "main", label: "main" },
  { type: "next", label: "next" },
] as const;

function getWebringUrl(type: "previous" | "main" | "next"): string {
  if (type === "main") {
    return new URL("/", WEBRING_HOSTNAME).toString();
  }
  return new URL(`/${type}?host=${host}`, WEBRING_HOSTNAME).toString();
}

const commitSha = import.meta.env.VERCEL_GIT_COMMIT_SHA?.slice(0, 7) ?? "dev";
---

<footer class="w-full max-w-184 flex flex-col items-center gap-3 sm:flex-row sm:items-end sm:justify-between sm:gap-0 font-sans mt-auto pt-8 sm:pt-0 relative z-10">
  <div class="flex flex-col items-center sm:items-start gap-2 order-2 sm:order-none">
    <div class="flex items-end gap-0.5 text-base leading-5">
      <span>PH: (</span>
      {webringLinks.map((link, i) => (
        <>
          <Link href={getWebringUrl(link.type)} target="_self">{link.label}</Link>
          {i < webringLinks.length - 1 && <span>|</span>}
        </>
      ))}
      <span>)</span>
    </div>
    <p class="text-base leading-5">Last seen in West Lafayette, IN</p>
  </div>
  <div class="flex flex-col items-center sm:items-end gap-2 -order-1 sm:order-none">
    <div class="flex items-start gap-5">
      <a href="https://x.com/rayhanadev" target="_blank" rel="noopener noreferrer" aria-label="Twitter" class="social-link relative opacity-60 transition-opacity duration-200 ease-out outline-none hover:opacity-100 focus:opacity-100 motion-reduce:transition-none">
        <img src={Twitter.src} alt="" width="20" height="20" loading="lazy" class="size-5 select-none" />
      </a>
      <a href="https://github.com/rayhanadev" target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="social-link relative opacity-60 transition-opacity duration-200 ease-out outline-none hover:opacity-100 focus:opacity-100 motion-reduce:transition-none">
        <img src={Github.src} alt="" width="20" height="20" loading="lazy" class="size-5 select-none" />
      </a>
      <a href="https://linkedin.com/in/rayhanadev" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="social-link relative opacity-60 transition-opacity duration-200 ease-out outline-none hover:opacity-100 focus:opacity-100 motion-reduce:transition-none">
        <img src={LinkedIn.src} alt="" width="20" height="20" loading="lazy" class="size-5 select-none" />
      </a>
    </div>
    <div class="flex items-center gap-2 text-base leading-5">
      <p>{commitSha} on ▲</p>
      <span class="pb-0.5" aria-hidden="true">•</span>
      <button id="gol-toggle" role="switch" aria-checked="false" aria-label="Game of Life" class="gol-toggle group relative w-6 h-3.5 mt-px rounded-full bg-neutral-300 cursor-pointer shrink-0 transition-colors duration-200 ease-out aria-checked:bg-black active:scale-95 motion-reduce:transition-none">
        <span class="absolute top-[2px] left-[2px] size-2.5 rounded-full bg-white block will-change-transform transition-transform duration-200 ease-in-out group-aria-checked:translate-x-2.5 motion-reduce:transition-none"></span>
      </button>
    </div>
  </div>
</footer>

<style>
  @media (pointer: coarse) {
    .social-link::before,
    .gol-toggle::before {
      content: "";
      position: absolute;
      display: block;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      min-height: 44px;
      min-width: 44px;
    }
  }
</style>
